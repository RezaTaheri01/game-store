{% load i18n %}
{#Category#}
<li class="nav-item dropdown rounded-3 category-main" id="category">
    <!-- Dropdown -->
    <a class="nav-link dropdown-toggle rounded-3" href="#" id="navbarDropdownMenuLink" role="button"
       data-bs-toggle="dropdown" aria-expanded="false" onclick="close_profile()">
        {% trans 'Category' %}
    </a>
    {#category#}
    <ul class="dropdown-menu rounded-3 main-categories ms-3 ms-md-0" aria-labelledby="navbarDropdownMenuLink"
         id="category-menu">
        {% for cat in main_category %}
            {% if cat.parentcategory_set.all %}
                <li class="rounded-3">
                    <a class="dropdown-item text-center rounded-3"
                       href="{% url 'products_page' base='main-category' slug=cat.slug %}">
                        {{ cat.title }} &raquo;
                    </a>
                    {#                    <hr class="m-0 opacity-25">#}
                    <ul class="dropdown-menu dropdown-submenu mt-2 rounded-3 pre-scrollable-parent">
                        {% for sub_cat in cat.parentcategory_set.all %}
                            <li class="rounded-3 parent-categories">
                                <a class="dropdown-item text-center rounded-3"
                                   href="{% url 'products_page' base='parent-category' slug=sub_cat.slug %}">{{ sub_cat.title }} &raquo;</a>
                                {#                                <hr class="m-0">#}
                                <ul class="dropdown-menu dropdown-submenu mt-2 rounded-3 pre-scrollable">
                                    <li class="rounded-3 categories">
                                        {% for sub_sub_cat in sub_cat.productcategory_set.all %}
                                            <a class="dropdown-item text-center rounded-3 product-category"
                                               href="{% url 'products_page' base=sub_cat.slug slug=sub_sub_cat.url_title %}">{{ sub_sub_cat.title }}</a>
                                        {% endfor %}
                                    </li>
                                </ul>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
</li>


<li class="nav-item dropdown rounded-3 category-mobile" id="category">
    <!-- Dropdown -->
    <a class="nav-link dropdown-toggle rounded-3" href="#" id="navbarDropdownMenuLink" role="button"
       data-bs-toggle="dropdown" aria-expanded="false">
        {% trans 'Category' %}
    </a>
    {#category#}
    <ul class="dropdown-menu rounded-3 main-categories ms-3 ms-md-0" aria-labelledby="navbarDropdownMenuLink">
        {% for cat in main_category %}
            {% if cat.parentcategory_set.all %}
                <li class="rounded-3 dropend">
                    <a class="dropdown-item text-center rounded-3 d-inline"
                       href="{% url 'products_page' base='main-category' slug=cat.slug %}">
                        {{ cat.title }}
                    </a>
                    <button type="button" class="btn btn-transparent dropdown-toggle dropdown-toggle-split px-3"
                            data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="visually-hidden">Toggle Dropdown</span>
                    </button>

                    <ul class="dropdown-menu main-submenu dropdown-submenu mt-2 rounded-3 pre-scrollable-parent">
                        {% for sub_cat in cat.parentcategory_set.all %}
                            <li class="rounded-3 parent-categories dropend">
                                <a class="dropdown-item text-center rounded-3 d-inline"
                                   href="{% url 'products_page' base='parent-category' slug=sub_cat.slug %}">{{ sub_cat.title }}</a>
                                <button type="button"
                                        class="btn btn-transparent dropdown-toggle dropdown-toggle-split px-3"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                    <span class="visually-hidden">Toggle Dropdown</span>
                                </button>
                                {#                                <hr class="m-0">#}
                                <ul class="dropdown-menu last-submenu dropdown-submenu mt-2 rounded-3 pre-scrollable">
                                    <li class="rounded-3 categories">
                                        {% for sub_sub_cat in sub_cat.productcategory_set.all %}
                                            <a class="dropdown-item text-center rounded-3 product-category"
                                               href="{% url 'products_page' base=sub_cat.slug slug=sub_sub_cat.url_title %}">{{ sub_sub_cat.title }}</a>
                                        {% endfor %}
                                    </li>
                                </ul>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
</li>
